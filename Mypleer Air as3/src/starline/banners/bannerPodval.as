package starline.banners{	import flash.display.Sprite;	import flash.display.Loader;	import fl.containers.UILoader;	import flash.utils.Timer;	import flash.events.TimerEvent;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.net.navigateToURL;	import flash.events.IOErrorEvent;	public class bannerPodval extends Sprite {		public var link1:String;		public var link2:String;		public var link3:String;		public var link4:String;		public var link5:String;		public var link6:String;		public var url:URLRequest;		public var xmlLoader:URLLoader;		public var myTimer:Timer;		public var ul1:UILoader;		public var ul2:UILoader;		public var ul3:UILoader;		public var ul4:UILoader;		public var ul5:UILoader;				public var bl1:UILoader;		public var bl2:UILoader;		public var bl3:UILoader;		public var bl4:UILoader;		public var bl5:UILoader;		public var speed:Number;		public var fon:UILoader;				public function bannerPodval(apiurl:String,appid:Number,userid:String) {        fon=new UILoader(); addChild(fon);		fon.width=726;		fon.height=60;		fon.load(new URLRequest(apiurl+'/images/back.png'));		ul1=new UILoader(); addChild(ul1);		ul2=new UILoader(); addChild(ul2);		ul3=new UILoader(); addChild(ul3);		ul4=new UILoader(); addChild(ul4);		ul5=new UILoader(); addChild(ul5);		ul1.buttonMode=true;        ul2.buttonMode=true;        ul3.buttonMode=true;        ul4.buttonMode=true;        ul5.buttonMode=true;		 ul1.width=100; ul1.height=50; ul1.x=185;ul1.y=5;		 ul2.width=100; ul2.height=50; ul2.x=290;ul2.y=5;		 ul3.width=100; ul3.height=50; ul3.x=395;ul3.y=5;		 ul4.width=100; ul4.height=50; ul4.x=500;ul4.y=5;		 ul5.width=100; ul5.height=50; ul5.x=605;ul5.y=5;				 		 //		bl1=new UILoader(); addChild(bl1);   bl1.alpha=0;		bl2=new UILoader(); addChild(bl2);   bl2.alpha=0;		bl3=new UILoader(); addChild(bl3);   bl3.alpha=0;		bl4=new UILoader(); addChild(bl4);   bl4.alpha=0;		bl5=new UILoader(); addChild(bl5);   bl5.alpha=0;	    bl1.buttonMode=true;        bl2.buttonMode=true;        bl3.buttonMode=true;        bl4.buttonMode=true;        bl5.buttonMode=true;						 bl1.width=100; bl1.height=50; bl1.x=185; bl1.y=5;		 bl2.width=100; bl2.height=50; bl2.x=290;bl2.y=5;		 bl3.width=100; bl3.height=50; bl3.x=395;bl3.y=5;		 bl4.width=100; bl4.height=50; bl4.x=500;bl4.y=5;		 bl5.width=100; bl5.height=50; bl5.x=605;bl5.y=5;				 		 			url=new URLRequest(apiurl+'/flash_frame.php?appid='+appid+'&userid='+userid);						xmlLoader = new URLLoader();			xmlLoader.load(url);			xmlLoader.addEventListener(Event.COMPLETE, processXML);			xmlLoader.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);             myTimer=new Timer(10000,1);			myTimer.addEventListener(TimerEvent.TIMER_COMPLETE, completeHandler);		}	  private function errorHandler(e:IOErrorEvent):void {	  	  myTimer.start();      trace( "Had problem loading the XML File.");		          }		private function completeHandler(e:TimerEvent):void {						xmlLoader.load(url);					}		private function processXML(e:Event):void {			// Load XML data			XML.ignoreWhitespace=true;			var Collections:XML=new XML(e.target.data);			if (Collections.attributes()[0]<20){				speed=60;				}				else{					speed=Collections.attributes()[0];					}										myTimer.delay=speed*1000;					myTimer.start();			if (Collections.image.length()>=1) {				link1=Collections.image[0].link[0];				ul1.source=Collections.image[0].source[0];				ul1.load();				ul1.removeEventListener(MouseEvent.CLICK,click1);				ul1.addEventListener(MouseEvent.CLICK,click1);				bl1.removeEventListener(MouseEvent.MOUSE_OVER,over1);				bl1.removeEventListener(MouseEvent.MOUSE_OUT, over1);				if(Collections.image[0].hover[0]){					bl1.load(new URLRequest(Collections.image[0].hover[0]));					bl1.addEventListener(MouseEvent.MOUSE_OVER, over1);				    bl1.addEventListener(MouseEvent.MOUSE_OUT,  over1);					bl1.addEventListener(MouseEvent.CLICK,click1);				}            }			if (Collections.image.length()>=2) {				link2=Collections.image[1].link[0];				ul2.source=Collections.image[1].source[0];				ul2.load();				ul2.removeEventListener(MouseEvent.CLICK,click2);				ul2.addEventListener(MouseEvent.CLICK,click2);				bl2.removeEventListener(MouseEvent.MOUSE_OVER,over2);				bl2.removeEventListener(MouseEvent.MOUSE_OUT, over2);				if(Collections.image[1].hover[0]){					bl2.load(new URLRequest(Collections.image[1].hover[0]));					bl2.addEventListener(MouseEvent.MOUSE_OVER, over2);				    bl2.addEventListener(MouseEvent.MOUSE_OUT,  over2);					bl2.addEventListener(MouseEvent.CLICK,click2);				}			}			if (Collections.image.length()>=3) {				link3=Collections.image[2].link[0];				ul3.source=Collections.image[2].source[0];				ul3.load();				ul3.removeEventListener(MouseEvent.CLICK,click3);				ul3.addEventListener(MouseEvent.CLICK,click3);				bl3.removeEventListener(MouseEvent.MOUSE_OVER,over3);				bl3.removeEventListener(MouseEvent.MOUSE_OUT, over3);				if(Collections.image[2].hover[0]){					bl3.load(new URLRequest(Collections.image[2].hover[0]));					bl3.addEventListener(MouseEvent.MOUSE_OVER, over3);				    bl3.addEventListener(MouseEvent.MOUSE_OUT,  over3);					bl3.addEventListener(MouseEvent.CLICK,click3);				}			}			if (Collections.image.length()>=4) {				link4=Collections.image[3].link[0];				ul4.source=Collections.image[3].source[0];				ul4.load();				ul4.removeEventListener(MouseEvent.CLICK,click4);				ul4.addEventListener(MouseEvent.CLICK,click4);				bl4.removeEventListener(MouseEvent.MOUSE_OVER,over4);				bl4.removeEventListener(MouseEvent.MOUSE_OUT, over4);				if(Collections.image[3].hover[0]){					bl4.load(new URLRequest(Collections.image[3].hover[0]));					bl4.addEventListener(MouseEvent.MOUSE_OVER, over4);				    bl4.addEventListener(MouseEvent.MOUSE_OUT,  over4);					bl4.addEventListener(MouseEvent.CLICK,click4);				}			}			if (Collections.image.length()>=5) {				link5=Collections.image[4].link[0];				ul5.source=Collections.image[4].source[0];				ul5.load();				ul5.removeEventListener(MouseEvent.CLICK,click5);				ul5.addEventListener(MouseEvent.CLICK,click5);				bl5.removeEventListener(MouseEvent.MOUSE_OVER,over5);				bl5.removeEventListener(MouseEvent.MOUSE_OUT, over5);				if(Collections.image[4].hover[0]){					bl5.load(new URLRequest(Collections.image[4].hover[0]));					bl5.addEventListener(MouseEvent.MOUSE_OVER, over5);				    bl5.addEventListener(MouseEvent.MOUSE_OUT,  over5);					bl5.addEventListener(MouseEvent.CLICK,click5);				}			}				}		private function click1(event:Event):void {			navigateToURL(new URLRequest(link1),'_blank');		}		private function click2(event:Event):void {			navigateToURL(new URLRequest(link2),'_blank');		}		private function click3(event:Event):void {			navigateToURL(new URLRequest(link3),'_blank');		}		private function click4(event:Event):void {			navigateToURL(new URLRequest(link4),'_blank');		}		private function click5(event:Event):void {			navigateToURL(new URLRequest(link5),'_blank');		}				private function over1(event:Event):void {		 if(event.type=='mouseOut'){bl1.alpha=0;}else bl1.alpha=1;		}		private function over2(event:Event):void {		 if(event.type=='mouseOut'){bl2.alpha=0;}else bl2.alpha=1;		}		private function over3(event:Event):void {		 if(event.type=='mouseOut'){bl3.alpha=0;}else bl3.alpha=1;		}		private function over4(event:Event):void {		 if(event.type=='mouseOut'){bl4.alpha=0;}else bl4.alpha=1;		}		private function over5(event:Event):void {		 if(event.type=='mouseOut'){bl5.alpha=0;}else bl5.alpha=1;		}	}}